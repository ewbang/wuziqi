<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>五子棋复盘研究</title>
    <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
<header class="header">
        <h1>五子棋复盘研究</h1>
        <p>Gobang - 享受策略与智慧的对弈</p>
        <button type="button" class="header-rules-btn" id="rules-btn">📖 规则说明</button>
    </header>
    
    <div class="game-wrapper">
        <!-- 左侧面板 -->
        <div class="side-panel">
            <div class="player-card black-card active" id="black-player">
                <div class="player-header">
                    <div class="player-piece-icon black"></div>
                    <span class="player-name">黑方</span>
                </div>
                <div class="player-status thinking" id="black-status">思考中...</div>
            </div>
            
            <div class="player-card white-card" id="white-player">
                <div class="player-header">
                    <div class="player-piece-icon white"></div>
                    <span class="player-name">白方</span>
                </div>
                <div class="player-status" id="white-status">等待中</div>
            </div>
            
            <div class="settings-panel">
                <h3>⚙️ 游戏设置</h3>
                
                <div class="toggle-container">
                    <span class="toggle-label">🚫 禁手规则</span>
                    <label class="toggle-switch">
                        <input type="checkbox" id="forbidden-toggle" checked>
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                <div class="toggle-container">
                    <span class="toggle-label">👁️ 显示禁点</span>
                    <label class="toggle-switch">
                        <input type="checkbox" id="show-forbidden-toggle" checked>
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                <div class="toggle-container">
                    <span class="toggle-label">🔢 显示序号</span>
                    <label class="toggle-switch">
                        <input type="checkbox" id="show-number-toggle" checked>
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                
                <div class="color-selector">
                    <span class="color-selector-label">🎨 棋盘颜色</span>
                    <div class="color-options">
                        <div class="color-option color-golden active" data-theme="default" title="金黄木色"></div>
                        <div class="color-option color-dark-wood" data-theme="dark-wood" title="深棕红木"></div>
                        <div class="color-option color-light-maple" data-theme="light-maple" title="浅色枫木"></div>
                        <div class="color-option color-jade" data-theme="jade-green" title="翡翠绿"></div>
                        <div class="color-option color-dark-gray" data-theme="dark-gray" title="深灰黑"></div>
                        <div class="color-option color-bamboo" data-theme="bamboo" title="竹质色"></div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 棋盘区域 -->
        <div class="board-container">
            <div class="board-wrapper">
                <div class="coord-left" id="coord-left"></div>
                <div class="board" id="board">
                    <div class="board-grid" id="board-grid">
                        <div class="board-lines"></div>
                    </div>
                </div>
            </div>
            <div class="coord-bottom" id="coord-bottom"></div>
        </div>
        
        <!-- 右侧：操作按钮 + 棋谱记录 -->
        <div class="right-panel">
            <div class="controls-panel">
                <button class="btn btn-undo" id="undo-btn"><span>↶ 悔棋</span></button>
                <button class="btn btn-reset" id="reset-btn"><span>🔄 重新开始</span></button>
                <button class="btn btn-save" id="save-btn"><span>📸 保存图片</span></button>
            </div>
            <div class="history-panel">
                <h3>📝 棋谱记录</h3>
                <div class="history-list" id="history-list">
                    <div class="history-empty">暂无记录</div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 获胜弹窗 -->
    <div class="modal-overlay" id="winner-modal">
        <div class="modal-content">
            <div class="modal-icon winner">🏆</div>
            <h2 id="winner-title">恭喜获胜！</h2>
            <p id="winner-text">黑方获得胜利！</p>
            <button class="modal-btn" id="modal-close-btn">再来一局</button>
        </div>
    </div>
    
    <!-- 禁手提示弹窗 -->
    <div class="modal-overlay" id="forbidden-modal">
        <div class="modal-content">
            <div class="modal-icon forbidden">⚠️</div>
            <h2>禁手！</h2>
            <p id="forbidden-text">此处为禁手点，黑方不能落子</p>
            <button class="modal-btn" id="forbidden-close-btn">知道了</button>
        </div>
    </div>
    
    <!-- 规则说明弹窗 -->
    <div class="modal-overlay" id="rules-modal">
        <div class="modal-content modal-content-rules">
            <h2 class="rules-title">📖 五子棋规则</h2>
            <div class="rules-body">
                <section>
                    <h3>基本规则</h3>
                    <p>两人对弈，<strong>黑方先手</strong>，白方后手，双方轮流在棋盘交叉点上落子，每次一子。</p>
                </section>
                <section>
                    <h3>胜利条件</h3>
                    <p>率先在<strong>横、竖、斜</strong>任一方向上<strong>连成五子</strong>的一方获胜（五子连珠）。</p>
                </section>
                <section>
                    <h3>禁手规则（可选）</h3>
                    <p>本游戏支持禁手，可在「游戏设置」中开关。开启后，<strong>仅对黑方</strong>生效：</p>
                    <ul>
                        <li><strong>三三禁手</strong>：同时形成两个活三</li>
                        <li><strong>四四禁手</strong>：同时形成两个四</li>
                        <li><strong>长连禁手</strong>：形成六子或以上连线</li>
                    </ul>
                    <p>黑方若下在禁手点，将判负或不允许落子（本游戏中会提示并禁止落子）。白方无禁手。</p>
                </section>
                <section>
                    <h3>其他</h3>
                    <p>棋盘为 15×15，坐标横向 A～O、纵向 1～15，便于记录棋谱。支持悔棋、重新开始与保存棋局图片。</p>
                </section>
            </div>
            <button class="modal-btn" id="rules-close-btn">知道了</button>
        </div>
    </div>
    
    <div class="toast" id="toast"></div>
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
    <script src="/js/script.js"></script>
</body>
</html>